### Hi there ðŸ‘‹

**charli02/charli02** is a âœ¨ _special_ âœ¨ repository because its `README.md` (this file) appears on your GitHub profile.

Here are some ideas to get you started:

- ðŸ”­ Iâ€™m currently working on ...
- ðŸŒ± Iâ€™m currently learning ...
- ðŸ‘¯ Iâ€™m looking to collaborate on ...
- ðŸ¤” Iâ€™m looking for help with ...
- ðŸ’¬ Ask me about ...
- ðŸ“« How to reach me: ...
- ðŸ˜„ Pronouns: ...
- âš¡ Fun fact: ...
//Rotativa 
 public ActionResult CreateFileName()
        {
            string newFileName = Guid.NewGuid().ToString();
            return Json(new { data = newFileName });
        }
        
        -----------------------------------------------------
         function DownloadInvoice(InvoiceUID, BatchID) {
        ShowLoader();
        $.ajax({
            url: '@Url.Action("CreateFileName", "Operations")',
            type: 'POST',
            data: {},
            success: function (result) {
                $.ajax({
                    url: '@Url.Action("generateBillingInvoicePdf", "Billing")',
                    type: 'POST',
                    data: { FileName: result.data, BillingBatchUID: null, BillingBatchID: BatchID, InvoiceUID: InvoiceUID },
                    success: function (result1) {
                        HideLoader();
                        window.open("/Resources/Downloads/" + result.data + ".pdf", '_blank');
                    }
                });
            }
        });
    }
    
    ----------------------------------------------------------
    
    #region download invoice

        [ActionDownload]
        public ActionResult generateBillingInvoicePdf(string fileName, string BillingBatchUID, string BillingBatchID, string InvoiceUID, string DocSize, string InvoiceType)
        {
            try
            {
                #region Pdf

                string FileName = fileName + ".pdf";
                string path = Path.Combine(System.Web.Hosting.HostingEnvironment.ApplicationPhysicalPath + "/Resources/Downloads/");
                string savepath = path + FileName;

                DateTime currentDate = CommonFunction.fnDateTimeLocalWithUTC;
                string onlyDate = CommonFunction.ConvertDateToStringWithoutOffset(currentDate);//currentDate.ToString("MM/dd/yyyy").Replace("-", "/").Replace("-", "/");
                TimeSpan timeSpan = new TimeSpan(currentDate.TimeOfDay.Hours, currentDate.TimeOfDay.Minutes, 00);
                string onlyTime = new DateTime().Add(timeSpan).ToString("hh:mm tt");

                string userName = Session["LoginUserName"].ToString();

                string footer = "--footer-right \" Page: [page] of [toPage]\" " + "--footer-left \"Batch: " + BillingBatchID + "\" --footer-center \"Generated by " + userName + " on " + onlyDate + " at " + onlyTime + " \" --footer-font-size \"9\" --footer-spacing 5 --footer-font-name \"open sans\"";

                Rotativa.Core.DriverOptions footerItem = new Rotativa.Core.DriverOptions();
                footerItem.CustomSwitches = footer;
                if (DocSize != null)
                {
                    if (DocSize == "A4")
                    {
                        footerItem.PageSize = Rotativa.Core.Options.Size.A4;
                    }
                    else if (DocSize == "Letter")
                    {
                        footerItem.PageSize = Rotativa.Core.Options.Size.Letter;
                    }
                    else
                    {
                        footerItem.PageSize = Rotativa.Core.Options.Size.Letter;
                    }
                }
                else
                {
                    footerItem.PageSize = Rotativa.Core.Options.Size.Letter;
                }

                ActionAsPdf pdf = new ActionAsPdf("billingInvoiceTemplate1Pdf", new { BillingBatchUID = BillingBatchUID, CompanyID = CommonFunction.sCompanyID, DateFormatId = Convert.ToInt16("0" + Session["cDateFormatId"]), InvoiceUID = InvoiceUID, InvoiceType = InvoiceType })
                {
                    FileName = FileName,
#pragma warning disable CS0618 // 'AsPdfResultBase.SaveOnServerPath' is obsolete: 'Use BuildPdf(this.ControllerContext) method instead and use the resulting binary data to do what needed.'
                    SaveOnServerPath = savepath,
#pragma warning restore CS0618 // 'AsPdfResultBase.SaveOnServerPath' is obsolete: 'Use BuildPdf(this.ControllerContext) method instead and use the resulting binary data to do what needed.'
                    RotativaOptions = footerItem
                };
                return pdf;
                #endregion
            }
#pragma warning disable CS0168 // The variable 'ex' is declared but never used
            catch (Exception ex)
#pragma warning restore CS0168 // The variable 'ex' is declared but never used

            {
            }

            return Json(new { data = 1 });
        }

        public ActionResult billingInvoiceTemplate1Pdf(string BillingBatchUID, string CompanyID, int DateFormatId, string InvoiceUID, string InvoiceType)
        {
            if (InvoiceUID == null)
            {
                InvoiceUID = "";
            }
            if (BillingBatchUID == null)
            {
                BillingBatchUID = "";
            }
            var model = new InvoiceTemplateReportModel();
            model.DateFormatId = DateFormatId;
            model.BillingBatch_vw_Invocie_Template = _repository.GetBillingBatch_vw_Invocie_Template(BillingBatchUID, CompanyID, InvoiceUID, InvoiceType);
            model.BillingDetailByBillingBatchUIDList = _repository.GetBillingDetailByBillingBatchUID(BillingBatchUID, InvoiceUID, CompanyID);
            return View(model);
        }

        #endregion
    
    
    -------------------------Web.config.------------------------------
    
     <system.web>
    <sessionState cookieless="false" timeout="20" />
    <customErrors mode="Off" />
    <compilation debug="true" targetFramework="4.5">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <httpRuntime targetFramework="4.5" maxUrlLength="12288" maxQueryStringLength="2097100" maxRequestLength="2000000000" executionTimeout="3600" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  
   <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxUrl="12288" maxQueryString="2097100" />
      </requestFiltering>
    </security>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
